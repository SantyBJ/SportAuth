<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Editar Torneo</title>
  <link rel="icon" type="image/png" href="{{ url_for('static', filename='img/logo_v2.png') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/general.css') }}">
</head>
<body>

<div class="overlay">

  <div class="container form-container">

    <h1 class="title">Editar Torneo</h1>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="messages">
          {% for category, message in messages %}
            <div class="msg {{ category }}">{{ message }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <form action="{{ url_for('torneos.actualizar_torneo') }}" method="POST" class="form-box">

      <input type="hidden" name="id" value="{{ torneo[0] }}">

      <label>Nombre del Torneo:</label>
      <input type="text" name="nombre" value="{{ torneo[1] }}" required>

      <label>Mínimo de Equipos:</label>
      <input type="number" name="min_equipos" value="{{ torneo[2] }}" required>

      <label>Máximo de Equipos:</label>
      <input type="number" name="max_equipos" value="{{ torneo[3] }}" required>

      <label>Mínimo de Jugadores:</label>
      <input type="number" name="min_jugadores" value="{{ torneo[4] }}" required>

      <label>Máximo de Jugadores:</label>
      <input type="number" name="max_jugadores" value="{{ torneo[5] }}" required>

      <label>Jugadores en cancha:</label>
      <input type="number" name="jugadores_cancha" value="{{ torneo[11] }}" required>

      <label>Género:</label>
      <select name="genero" required>
        <option value="M" {% if torneo[6] == 'M' %}selected{% endif %}>Masculino</option>
        <option value="F" {% if torneo[6] == 'F' %}selected{% endif %}>Femenino</option>
        <option value="NULL" {% if not torneo[6] %}selected{% endif %}>Mixto</option>
      </select>

      <label>Fecha Inicio:</label>
      <input type="date" name="fecini" value="{{ torneo[7] }}" required>

      <label>Fecha Fin:</label>
      <input type="date" name="fecfin" value="{{ torneo[8] }}" required>

      <label>Deporte:</label>
      <select name="deporte">
        {% for dep in deportes %}
          <option value="{{ dep[0] }}" {% if dep[0] == torneo[9] %}selected{% endif %}>{{ dep[1] }}</option>
        {% endfor %}
      </select>

      <fieldset class="form-fieldset">
        <legend>Profesionalismos:</legend>
        {% for prfm in profesionalismos %}
          <label class="checkbox-line">
            <input type="checkbox" name="profesionalismos" value="{{ prfm[0] }}"
                   {% if prfm[0] in seleccionados %}checked{% endif %}>
            {{ prfm[1] }}
          </label>
        {% endfor %}
      </fieldset>

      <label>Estado:</label>
      <select name="estado">
        <option value="P" {% if torneo[10] == 'P' %}selected{% endif %}>Programado</option>
        <option value="E" {% if torneo[10] == 'E' %}selected{% endif %}>En ejecución</option>
        <option value="F" {% if torneo[10] == 'F' %}selected{% endif %}>Finalizado</option>
      </select>

      <button type="submit" class="btn form-btn">Actualizar</button>

    </form>

    <div class="buttons">
      <a href="{{ url_for('torneos.listar_torneos') }}" class="btn secondary">Volver</a>
    </div>

  </div>

</div>

</body>
</html>
